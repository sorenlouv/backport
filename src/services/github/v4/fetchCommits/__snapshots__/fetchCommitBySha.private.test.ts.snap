// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`fetchCommitBySha snapshot request/response makes the right queries: Query: CommitsBySha 1`] = `
"
    query CommitsBySha($repoOwner: String!, $repoName: String!, $oid: String!) {
      repository(owner: $repoOwner, name: $repoName) {
        object(expression: $oid) {
          ...SourceCommitWithTargetPullRequest
        }
      }
    }

    
    fragment SourceCommitWithTargetPullRequest on Commit {
      # Source Commit
      repository {
        name
        owner {
          login
        }
      }
      oid
      message
      committedDate

      # Source pull request: PR where source commit was merged in
      associatedPullRequests(first: 1) {
        edges {
          node {
            url
            number
            labels(first: 50) {
              nodes {
                name
              }
            }
            baseRefName

            # source merge commit (the commit that actually went into the source branch)
            sourceMergeCommit: mergeCommit {
              oid
              message
            }

            # (possible) backport pull requests referenced in the source pull request
            timelineItems(last: 20, itemTypes: CROSS_REFERENCED_EVENT) {
              edges {
                node {
                  ... on CrossReferencedEvent {
                    targetPullRequest: source {
                      __typename

                      # Target PRs (backport PRs)
                      ... on PullRequest {
                        # target merge commit: the backport commit that was merged into the target branch
                        targetMergeCommit: mergeCommit {
                          oid
                          message
                        }
                        repository {
                          name
                          owner {
                            login
                          }
                        }
                        url
                        title
                        state
                        baseRefName
                        number
                        commits(first: 20) {
                          edges {
                            node {
                              targetCommit: commit {
                                message
                                oid
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  
  "
`;

exports[`fetchCommitBySha snapshot request/response returns the correct response 1`] = `
Object {
  "committedDate": "2021-12-20T14:20:16Z",
  "expectedTargetPullRequests": Array [
    Object {
      "branch": "8.0",
      "mergeCommit": Object {
        "message": "[APM] Add note about synthtrace to APM docs (#121633) (#121643)

Co-authored-by: SÃ¸ren Louv-Jansen <soren.louv@elastic.co>",
        "sha": "842adfdeb5541b059231857522f9009771a46107",
      },
      "number": 121643,
      "state": "MERGED",
      "url": "https://github.com/elastic/kibana/pull/121643",
    },
  ],
  "originalMessage": "[APM] Add note about synthtrace to APM docs (#121633)",
  "pullNumber": 121633,
  "pullUrl": "https://github.com/elastic/kibana/pull/121633",
  "sha": "d421ddcf6157150596581c7885afa3690cec6339",
  "sourceBranch": "main",
}
`;
